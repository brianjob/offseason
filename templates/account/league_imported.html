{% extends "base.html" %}
{% block content %}
<div class="container">
<table class="table">
	<thead>
		<tr><th>Team</th><th>Imported</th></tr>
	</thead>
	<tbody>
		{% for team in league.team_set.all %}
		<tr class="team-row" data-id="{{team.id}}">
			<td>{{team.name}}</td><td class="result"></td>
		</tr>
		{% endfor %}
	</tbody>
</table>
</div>
<script type="text/javascript">
$(function() {
	$(".team-row").each(function() {
		var id = $(this).data('id');
		result = $(this).children('.result');

		$.post("{% url 'account:fill_roster' %}",
		{
			team_id : id,
			access_token : "{{access_token}}",

		}).done(function(data) {
			data = JSON.parse(data);
			console.log('result: ' + data.result);
			debugger;
			if (data.result == 'success') {
				console.log('good');
				result.html('<span class="glyphicon glyphicon-ok" ></span>');
			} else {
				console.log('fail');
				result.html('<span class="glyphicon glyphicon-remove" ></span>');
			}
		});
	});
})
</script>
{% endblock %}